### 诗文详情页交互功能扩展设计提示词（可用于设计/前端开发/生图）

> 场景背景：古诗文学习网站的「诗文详情页」，需要在原有“阅读 + 注释 + 赏析”的基础上，强化**精读、记忆和语感训练**三个维度的交互功能。
> 下面的提示词按功能拆分为三大模块，可直接给设计 / 前端开发 / AIGC 工具使用。

---

### 一、字词悬停释义卡片（精读辅助）

- **整体目标**：在诗文详情页中，当用户将鼠标悬停在某个单字或词语上时，在附近弹出一张**小型卡片**，展示来自“文言文词典”的**简化释义**，帮助用户快速理解生僻字词。

- **交互触发逻辑**：
  - 用户鼠标移动到诗文正文中的某个字 / 词上（如“奇”“鸿鹄”“庖丁”等），停留约 300ms 后触发。
  - 仅对在本地字典中存在的词条启用悬停效果（比如鼠标样式变化、下划线/浅色底纹高亮）；不存在的词条保持普通文本。

- **卡片内容结构**：
  - **标题行**：大号字显示「词条本身」，如“鸿鹄”；右侧用小号灰色字体显示拼音（可选）。
  - **释义区域**：只展示 1–2 条**简化后的常用释义**，用「序号 + 简短句子」形式，例如：
    - 1. 比喻志向远大的人
    - 2. 天鹅
  - **例句区域（可选）**：若字典中有经典例句，可只展示一条，并用浅灰背景块显示。

- **视觉风格**：
  - 卡片为**米白色 / 浅灰色圆角矩形**，带轻微阴影，宽度约 260–320px。
  - 标题使用深绿色宋体加粗，正文为常规宋体，字号略小于正文。
  - 卡片指向当前字词的位置，底部可以有“小三角”指示（类似气泡提示）。

- **位置与自适应**：
  - 默认出现在**文字上方偏右**的位置；若空间不足（接近屏幕顶部），自动调整到下方。
  - 若在移动端，悬停改为**轻点一次出现、轻点空白处关闭**。

- **关闭逻辑**：
  - 鼠标移出文本 + 卡片区域后，延迟 200–300ms 自动淡出。
  - 也可在卡片右上角提供一个极小的「×」图标手动关闭（可选）。

- **数据来源**：
  - 字典数据来自现有的 `public/data/dictionary.json`，前端在进入详情页时可懒加载一次，查询时在内存中过滤。

---

### 二、「填空模式」——强化记忆练习

- **整体目标**：在诗文详情页增加一个「填空模式」开关，开启后，系统**随机选取若干完整句子**，将其替换为固定长度的「横线占位」，用户可通过回忆或默写来检验记忆程度；关闭模式后还原正常显示。

- **入口与状态**：
  - 在诗文标题区域或正文上方工具栏增加一个「填空模式」开关按钮（toggle），文案：「填空模式」。
  - 按钮样式：深绿色描边圆角按钮，开启时填充为深绿，文字改为白色。

- **句子选择规则**：
  - 以**自然句**为单位：按标点符号（如“，” “。” “！” “？” “；”）拆分为句子数组。
  - 每篇诗文**随机选择 20%–40%** 的句子作为填空对象（可略微随机，保证每次进入体验略有不同）。
  - 避免只选短句（如“一句只有 2～3 字”），优先选择长度适中的句子。

- **填空展示形式**：
  - 被选中的句子整体用一条或多条「横线」替代，例如：
    - 原句：「人生得意须尽欢，莫使金樽空对月。」  
      填空显示：「＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿。」
  - 横线长度大致与原句字数相当，但无需精确对齐（更重要的是视觉统一）。
  - 句子所在行仍占位，以免打乱整体排版和节奏。

- **提示与辅助**：
  - 鼠标悬停或点击横线区域，可显示一个淡淡的提示文案，如「试着回忆整句内容」。
  - 可在模式开启后，上方显示一段说明文字（浅灰小字）：「提示：横线处为被隐藏的完整诗句，尝试默写后再关闭填空模式查看答案。」。

- **切换逻辑**：
  - 开启模式：立即对当前诗文进行句子拆分和随机选取，渲染带横线版本。
  - 关闭模式：恢复为原始完整文本（不要持久修改原数据，只在前端渲染层做替换）。
  - 用户在切换不同诗词时，填空模式应**重置为关闭状态**（避免误解）。

---

### 三、「断句模式」——语感与节奏训练

- **整体目标**：在诗文详情页增加「断句模式」，开启后，系统**随机选取若干句子**，删除其中的标点符号，并用**高亮颜色**标注这些需要用户自行断句的句子，帮助训练古文断句能力与语感。

- **入口与状态**：
  - 在与「填空模式」同一工具栏中，增加一个独立按钮「断句模式」。
  - 两个模式互相独立，可以单独开启，也可以与填空模式**互斥**（建议两者互斥，以免交互过于复杂）。

- **句子目标选择**：
  - 仍以自然句为单位，选取规则与填空模式类似，但可以适当减少比例（例如**20% 左右**），以免页面出现过多高亮行影响阅读。
  - 优先选择**长句或结构较复杂的句子**，训练价值更高。

- **断句处理方式**：
  - 对被选中的句子：
    - 删除其中所有中文标点符号（、，。？！；：等），仅保留汉字和空格。
    - 将整句包裹在一个带高亮样式的 `<span>` 或 `<p>` 中。
  - 示例：
    - 原句：「即从巴峡穿巫峡，便下襄阳向洛阳。」  
      断句模式显示：「即从巴峡穿巫峡便下襄阳向洛阳」

- **高亮样式建议**：
  - 使用**淡黄底色 + 深绿色文字**，或深绿色左侧竖线，突出这些句子“需要你来断句”。
  - 在句子前加一个小标签，如【断句练习】，字体较小，颜色偏灰绿。

- **用户引导**：
  - 模式开启后，在页面顶部显示一条说明文案：「标记为高亮的句子已去掉标点，试着自行断句理解。」。
  - 可在句子旁边提供一个「显示原句」的小链接（可选），点击后只恢复该句的原标点版本（其余句子保持断句状态），增强可控性。

- **切换逻辑**：
  - 开启断句模式：基于原始文本生成“去标点 + 高亮”的版本进行渲染。
  - 关闭断句模式：还原所有句子的原始文本和标点。
  - 推荐与「填空模式」互斥：当用户开启「断句模式」时，如果「填空模式」已开启，应弹出小提示并自动关闭填空模式。

---

### 四、与现有系统的衔接提示

- **数据复用**：
  - 悬停释义直接复用当前 `dictionary.json` 中的字典数据（前端已有懒加载逻辑）。
  - 填空/断句基于当前诗文详情页中加载的 `poems.json` 中的 `content` 数组即可，无需额外数据。

- **技术实现要点（开发提示）**：
  - 在详情页组件中，将原始 `content` 保存在一个不可变的源数组中（如 `originalLines`），填空/断句均在衍生 `displayLines` 上操作。
  - 对句子级操作前，先做一次「按标点分句」的预处理映射，方便在模式切换时快速生成不同视图。
  - 注意响应式状态管理：两个模式的启用状态（布尔值）应集中控制，防止嵌套逻辑混乱。

> 以上提示词可直接用于：  
> - 交给 UI 设计师出高保真页面与动效；  
> - 交给前端开发同学实现交互；  
> - 作为描述文本喂给 AIGC 工具生成界面草图或交互动效示意图。  


