/**
 * 数据管理工具文件 data.js
 * 
 * 功能：
 * 1. 存储示例诗词数据
 * 2. 存储分类数据
 * 3. 存储文言文词典数据
 * 4. 提供数据查询和搜索的工具函数
 * 
 * 注意：这是前端课程项目，使用本地数据模拟。
 * 实际项目中应通过 API 从后端获取数据。
 */

/**
 * 示例诗词数据数组
 * 每个诗词对象包含：
 * - id: 唯一标识符
 * - title: 诗词标题
 * - author: 作者姓名
 * - dynasty: 朝代
 * - content: 诗词内容数组（每句一行）
 * - notes: 注释数组（可选）
 * - appreciation: 赏析文本（可选）
 */
export const samplePoems = [
  {
    id: '1',
    title: '将进酒',
    author: '李白',
    dynasty: '唐',
    content: [
      '君不见，黄河之水天上来，奔流到海不复回。',
      '君不见，高堂明镜悲白发，朝如青丝暮成雪。',
      '人生得意须尽欢，莫使金樽空对月。',
      '天生我材必有用，千金散尽还复来。',
      '烹羊宰牛且为乐，会须一饮三百杯。',
      '岑夫子，丹丘生，将进酒，杯莫停。',
      '与君歌一曲，请君为我倾耳听。',
      '钟鼓馔玉不足贵，但愿长醉不复醒。',
      '古来圣贤皆寂寞，惟有饮者留其名。',
      '陈王昔时宴平乐，斗酒十千恣欢谑。',
      '主人何为言少钱，径须沽取对君酌。',
      '五花马，千金裘，呼儿将出换美酒，与尔同销万古愁。'
    ],
    notes: [
      '将进酒：乐府旧题。将（qiāng）：请。',
      '君不见：你没有看见吗？是乐府体诗中提唱的常用语。',
      '高堂：高大的厅堂。',
      '会须：正应当。',
      '岑夫子：岑勋。丹丘生：元丹丘。二人均为李白的好友。',
      '钟鼓馔玉：钟鼓，富贵人家宴会中奏乐使用的乐器。馔（zhuàn）玉：形容食物如玉一样精美。',
      '陈王：指陈思王曹植。平乐：观名。在洛阳西门外，为汉代富豪显贵的娱乐场所。',
      '五花马：指名贵的马。一说毛色作五花纹，一说颈上长毛修剪成五瓣。'
    ],
    appreciation: '此诗为李白长安放还以后所作，思想内容非常深沉，艺术表现非常成熟。诗由黄河起兴，感情发展也像黄河之水那样奔腾激荡，不可遏止。诗人在政治上被排挤，受打击，理想不能实现，常常借饮酒来发泄胸中的郁积。人生快事莫若置酒会友，作者又正值“抱用世之才而不遇合”之际，于是满腔不合时宜借酒兴诗情，来了一次淋漓尽致的抒发。'
  },
  {
    id: '2',
    title: '静夜思',
    author: '李白',
    dynasty: '唐',
    content: [
      '床前明月光，疑是地上霜。',
      '举头望明月，低头思故乡。'
    ],
    notes: [
      '静夜思：安静的夜晚产生的思绪。',
      '疑：好像。',
      '举头：抬头。'
    ],
    appreciation: '这首诗写的是在寂静的月夜思念家乡的感受。诗的前两句，是写诗人在作客他乡的特定环境中一刹那间所产生的错觉。一个作客他乡的人都会有这样的感觉：白天奔波忙碌，倒还能冲淡离愁，到了夜深人静的时候，思乡的情绪，就难免一阵阵地在心头泛起波澜。'
  },
  {
    id: '3',
    title: '水调歌头·明月几时有',
    author: '苏轼',
    dynasty: '宋',
    content: [
      '明月几时有？把酒问青天。',
      '不知天上宫阙，今夕是何年。',
      '我欲乘风归去，又恐琼楼玉宇，',
      '高处不胜寒。',
      '起舞弄清影，何似在人间。',
      '转朱阁，低绮户，照无眠。',
      '不应有恨，何事长向别时圆？',
      '人有悲欢离合，月有阴晴圆缺，',
      '此事古难全。',
      '但愿人长久，千里共婵娟。'
    ],
    notes: [
      '水调歌头：词牌名。',
      '把酒：端起酒杯。',
      '宫阙：宫殿。',
      '琼楼玉宇：美玉砌成的楼宇，指想象中的仙宫。',
      '不胜：受不住。',
      '朱阁：朱红的华丽楼阁。',
      '绮户：雕饰华丽的门窗。',
      '婵娟：指月亮。'
    ],
    appreciation: '此词是中秋望月怀人之作，表达了对胞弟苏辙的无限怀念。词人运用形象描绘手法，勾勒出一种皓月当空、亲人千里、孤高旷远的境界氛围，反衬自己遗世独立的意绪和往昔的神话传说融合一处，在月的阴晴圆缺当中，渗进浓厚的哲学意味，可以说是一首将自然和社会高度契合的感喟作品。'
  },
  {
    id: '4',
    title: '春江花月夜',
    author: '张若虚',
    dynasty: '唐',
    content: [
      '春江潮水连海平，海上明月共潮生。',
      '滟滟随波千万里，何处春江无月明！',
      '江流宛转绕芳甸，月照花林皆似霰。',
      '空里流霜不觉飞，汀上白沙看不见。',
      '江天一色无纤尘，皎皎空中孤月轮。',
      '江畔何人初见月？江月何年初照人？',
      '人生代代无穷已，江月年年望相似。',
      '不知江月待何人，但见长江送流水。'
    ],
    notes: [
      '春江花月夜：乐府《清商曲辞·吴声歌曲》旧题。',
      '滟滟：波光荡漾的样子。',
      '芳甸：芳草丰茂的原野。',
      '霰：天空中降落的白色不透明的小冰粒。',
      '流霜：飞霜，古人以为霜和雪一样，是从空中落下来的，所以叫流霜。'
    ],
    appreciation: '《春江花月夜》是唐代诗人张若虚的诗作。此诗沿用陈隋乐府旧题，运用富有生活气息的清丽之笔，以月为主体，以江为场景，描绘了一幅幽美邈远、惝恍迷离的春江月夜图，抒写了游子思妇真挚动人的离情别绪以及富有哲理意味的人生感慨，表现了一种迥绝的宇宙意识，创造了一个深沉、寥廓、宁静的境界。'
  },
  {
    id: '5',
    title: '念奴娇·赤壁怀古',
    author: '苏轼',
    dynasty: '宋',
    content: [
      '大江东去，浪淘尽，千古风流人物。',
      '故垒西边，人道是，三国周郎赤壁。',
      '乱石穿空，惊涛拍岸，卷起千堆雪。',
      '江山如画，一时多少豪杰。',
      '遥想公瑾当年，小乔初嫁了，雄姿英发。',
      '羽扇纶巾，谈笑间，樯橹灰飞烟灭。',
      '故国神游，多情应笑我，早生华发。',
      '人生如梦，一尊还酹江月。'
    ],
    notes: [
      '念奴娇：词牌名。',
      '大江：指长江。',
      '淘：冲洗，冲刷。',
      '风流人物：指杰出的历史名人。',
      '故垒：过去遗留下来的营垒。',
      '周郎：指三国时吴国名将周瑜，字公瑾。',
      '雪：比喻浪花。',
      '公瑾：周瑜字公瑾。',
      '小乔：周瑜妻。',
      '羽扇纶巾：古代儒将的便装打扮。',
      '樯橹：这里代指曹操的水军战船。',
      '酹：以酒浇地，表示祭奠。'
    ],
    appreciation: '此词通过对月夜江上壮美景色的描绘，借对古代战场的凭吊和对风流人物才略、气度、功业的追念，曲折地表达了作者怀才不遇、功业未就、老大未成的忧愤之情，同时表现了作者关注历史和人生的旷达之心。全词借古抒怀，雄浑苍凉，大气磅礴，笔力遒劲，境界宏阔，将写景、咏史、抒情融为一体，给人以撼魂荡魄的艺术力量。'
  }
]

/**
 * 分类数据数组
 * 用于首页分类导航和诗词库筛选
 * 每个分类对象包含：
 * - id: 分类唯一标识
 * - name: 分类名称（显示文本）
 * - count: 该分类下的诗词数量（示例数据）
 */
export const categories = [
  { id: 'tang', name: '唐诗', count: 50000 },
  { id: 'song', name: '宋词', count: 21000 },
  { id: 'yuan', name: '元曲', count: 5000 },
  { id: 'pre-qin', name: '先秦散文', count: 3000 }
]

/**
 * 文言文词典数据对象
 * 键为查询词，值为词典条目对象
 * 每个词典条目包含：
 * - word: 词条名称
 * - meanings: 释义数组，每个释义包含 type（类型）和 content（内容）
 * - examples: 例句数组
 * - source: 出处
 */
export const dictionaryData = {
  '之': {
    word: '之',
    meanings: [
      {
        type: '基本义',
        content: '助词，用于主谓之间，取消句子独立性'
      },
      {
        type: '引申义',
        content: '代词，代指人或事物'
      },
      {
        type: '语境义',
        content: '动词，往、到'
      }
    ],
    examples: [
      '《论语》：“学而时习之，不亦说乎？”',
      '《庄子》：“鹏之徙于南冥也，水击三千里。”'
    ],
    source: '《说文解字》'
  },
  '乎': {
    word: '乎',
    meanings: [
      {
        type: '基本义',
        content: '语气助词，表示疑问或反问'
      },
      {
        type: '引申义',
        content: '介词，相当于“于”'
      }
    ],
    examples: [
      '《论语》：“学而时习之，不亦说乎？”',
      '《孟子》：“王侯将相宁有种乎？”'
    ],
    source: '《说文解字》'
  },
  '者': {
    word: '者',
    meanings: [
      {
        type: '基本义',
        content: '助词，用在名词、动词、形容词后，表示“……的人（或事物）”'
      },
      {
        type: '引申义',
        content: '语气助词，表示停顿'
      }
    ],
    examples: [
      '《论语》：“知者不惑，仁者不忧，勇者不惧。”',
      '《孟子》：“天将降大任于斯人也，必先苦其心志。”'
    ],
    source: '《说文解字》'
  },
  '也': {
    word: '也',
    meanings: [
      {
        type: '基本义',
        content: '语气助词，表示判断、肯定或强调'
      },
      {
        type: '引申义',
        content: '语气助词，表示疑问'
      }
    ],
    examples: [
      '《论语》：“有朋自远方来，不亦乐乎？”',
      '《孟子》：“鱼，我所欲也；熊掌，亦我所欲也。”'
    ],
    source: '《说文解字》'
  },
  '逝者如斯夫': {
    word: '逝者如斯夫',
    meanings: [
      {
        type: '基本义',
        content: '逝去的就像这流水一样'
      },
      {
        type: '语境义',
        content: '比喻时光流逝，一去不复返'
      }
    ],
    examples: [
      '《论语·子罕》：“子在川上曰：逝者如斯夫，不舍昼夜。”'
    ],
    source: '《论语·子罕》'
  },
  '庖丁': {
    word: '庖丁',
    meanings: [
      {
        type: '基本义',
        content: '名叫丁的厨师'
      },
      {
        type: '引申义',
        content: '泛指技艺精湛的厨师'
      }
    ],
    examples: [
      '《庄子·养生主》：“庖丁为文惠君解牛。”'
    ],
    source: '《庄子·养生主》'
  },
  '鸿鹄': {
    word: '鸿鹄',
    meanings: [
      {
        type: '基本义',
        content: '天鹅'
      },
      {
        type: '引申义',
        content: '比喻志向远大的人'
      }
    ],
    examples: [
      '《史记·陈涉世家》：“燕雀安知鸿鹄之志哉？”'
    ],
    source: '《史记·陈涉世家》'
  }
}

/**
 * 获取所有诗词
 * @returns {Array} 所有诗词的数组
 */
export function getAllPoems() {
  return samplePoems
}

/**
 * 根据ID获取指定诗词
 * @param {string} id - 诗词的唯一标识符
 * @returns {Object|null} 找到的诗词对象，未找到返回null
 */
export function getPoemById(id) {
  return samplePoems.find(poem => poem.id === id)
}

/**
 * 搜索诗词
 * 支持在标题、作者和内容中搜索关键词
 * @param {string} keyword - 搜索关键词
 * @returns {Array} 匹配的诗词数组
 */
export function searchPoems(keyword) {
  if (!keyword) return []
  const lowerKeyword = keyword.toLowerCase()
  return samplePoems.filter(poem => 
    poem.title.includes(keyword) ||
    poem.author.includes(keyword) ||
    poem.content.some(line => line.includes(keyword))
  )
}

/**
 * 根据分类获取诗词
 * @param {string} categoryId - 分类ID
 * @returns {Array} 该分类下的诗词数组
 * 
 * 注意：当前为简化实现，返回所有诗词。
 * 实际项目中应根据分类ID筛选对应朝代的诗词。
 */
export function getPoemsByCategory(categoryId) {
  // TODO: 根据实际分类逻辑筛选
  // 例如：tang -> 筛选dynasty为'唐'的诗词
  return samplePoems
}

/**
 * 查询文言文词典
 * @param {string} keyword - 要查询的字词
 * @returns {Object|null} 词典条目对象，未找到返回null
 */
export function searchDictionary(keyword) {
  if (!keyword) return null
  return dictionaryData[keyword] || null
}

/**
 * 获取热门诗词（用于首页推荐）
 * @param {number} limit - 返回数量限制，默认4首
 * @returns {Array} 热门诗词数组
 */
export function getPopularPoems(limit = 4) {
  return samplePoems.slice(0, limit)
}

